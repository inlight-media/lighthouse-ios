Lighthouse iOS SDK
===============

The Lighthouse iOS SDK is designed to be simple to develop with, allowing you to easily integrate Lighthouse iBeacon software into your apps. For more info about Lighthouse visit the [Lighthouse Website](http://lighthousebeacon.com.au)

## Install Guide

Installing the client should be a breeze. If it's not, please let us know at [team@lighthousebeacon.com.au](mailto:team@lighthousebeacon.com.au)

### Universal Library

Our recommended way of installing the Lighthouse SDK is to use the universal library we've created. With this, you'll be able to instrument your app regardless of whether or not it uses ARC (Automatic Reference Counting).

### Download

Download the contents of this repository.
Within the folder called "Lighthouse" should be the following contents:

- libLighthouse.a
- Lighthouse.h

### Add Files to Xcode
Just drag the Lighthouse folder into your Xcode project.

### Add Required Frameworks
Go into your app's targetâ€™s Build Phases screen and add the following (if they don't already exist) to the "Link Binary With Libraries" section.

- CoreLocation.framework
- CoreBluetooth.framework

### Import LighthouseManager.h
You'll need to import the LighthouseManager.h header into the files that contain code relating to lighthouse. You can either add them to individual files or include it in your ApplicationName-Prefix.pch file.

	#import "LighthouseManager.h"
	

### Add Background Modes
In your application plist file (often called "ApplicationName-Info.plist") add a row for
"Required background modes" of type Array. It then needs "App registers for location updates" and "App communicates using CoreBluetooth". Thesea are needed to receive the background beacon notifications

### Compile
Try and compile. It should work! 

If it doesn't work, let us know at [team@lighthousebeacon.com.au](mailto:team@lighthousebeacon.com.au) and one of us will help you right away.

### Get Application ID & Keys
If you haven't done so already, login to Ligthouse to get your Application ID & Keys.


## Instrumentation
Now it's time to actually use the client!

### Register Client
Register the LighthouseManager with your Application ID and access keys. The recommended place to do this is in one of your application delegates. Here's some example code:

	- (void)applicationDidBecomeActive:(UIApplication *)application {
		// Enable logging (optional)
		[LighthouseManager enableLogging];
		
		// Enable NSNotification events to be transmitted on enter/exit/range (optional)
		[LighthouseManager enableNotifications];
		
		// Configure the manager using Lighthouse keys
		[[LighthouseManager sharedInstance] configure:@{
			@"appId": @"your_app_id",
			@"appKey": @"your_app_key",
			@"appToken": @"your_app_token",
			@"appVersion": @"your_app_version", // optional
			@"uuids": @[@"beacon_uuids_to_monitor"]
		}];
		
		// Start monitoring
		[[LighthouseManager sharedInstance] launch];
		
		// Request permission (you can do this whenever you like - it will ask user for location permission - possibly you want to wait until they reach a certain section of your app)
		[[LighthouseManager sharedInstance] requestPermission];
	}

	
From now on, in your code, you can just reference the shared client by calling [LighthouseManager sharedInstance].

### Application Suspend & Resume
To best conserve battery and correctly trigger Lighthouse events you'll need to add the following lines to your application delegate.
	
	- (void)applicationWillResignActive:(UIApplication *)application {
		[[LighthouseManager sharedInstance] suspend];
	}

	- (void)applicationDidBecomeActive:(UIApplication *)application {
		[[LighthouseManager sharedInstance] activate];
	}

	- (void)applicationWillTerminate:(UIApplication *)application {
		[[LighthouseManager sharedInstance] terminate];
	}

### Debugging
The Lighthouse iOS SDK code does a lot of logging, but it's turned off by default. If you'd like to see the log lines generated by your usage of the client, you can enable logging easily:

	[LighthouseManager enableLogging];

Just put this at any point before you use LighthouseManager. A good place is in your application delegate.

To disable logging (by default it is disabled), simply call:

	[LighthouseManager disableLogging];

### Notifications
The Lighthouse iOS SDK doesn't just hog all the beacon events, after all sharing is caring. If enabled the SDK sends out NSNotificationCenter events when ever a user enters, exits or ranges (usually every second when within a beacon). These notifications contain a NSDictionary full of useful information such as the beacon ids, distance, accuracy, user's compass direction, etc. 

	[LighthouseManager enableNotifications];

Just put this at any point before you use LighthouseManager. A good place is in your application delegate.

To disable notifications (by default it is disabled), simply call:

	[LighthouseManager disableNotifications];

### Requesting Permission
You've all had that experience when you launch an app for the first time and get bombarded with permission requests for notifications, location, movement, microphones - the list goes on. In some situations you may wish to avoid this and only request permission at a relevant time in the user experience. We added the ```requestPermission``` method for this reason. Lighthouse won't work until permission has been requested (and accepted by the user). 

	[[LighthouseManager sharedInstance] requestPermission];
	
You can also check whether permission has been requested previously using:

	[[LighthouseManager sharedInstance] hasRequestedPermission];
	
## Changelog

##### 1.0.0

+ Initial SDK Release

### Questions & Support

If you have any questions, bugs, or suggestions, please email them to [team@lighthousebeacon.com.au](mailto:team@lighthousebeacon.com.au). We'd love to hear your feedback and ideas!
